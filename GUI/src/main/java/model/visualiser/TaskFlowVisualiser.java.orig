package model.visualiser;

<<<<<<< HEAD


=======
>>>>>>> kai
import edu.uci.ics.jung.graph.Graph;
import edu.uci.ics.jung.visualization.FRLayout;
import edu.uci.ics.jung.visualization.Layout;
import edu.uci.ics.jung.visualization.PluggableRenderer;
import edu.uci.ics.jung.visualization.Renderer;
import edu.uci.ics.jung.visualization.VisualizationViewer;
import edu.uci.ics.jung.graph.impl.DirectedSparseGraph;
import edu.uci.ics.jung.graph.DirectedEdge;
import edu.uci.ics.jung.graph.Vertex;
import edu.uci.ics.jung.graph.impl.DirectedSparseEdge;
import edu.uci.ics.jung.graph.impl.SparseVertex;
<<<<<<< HEAD
=======
import edu.uci.ics.jung.utils.Pair;
import edu.uci.ics.jung.utils.UserDataContainer;
import edu.uci.ics.jung.visualization.GraphMouseListener;
>>>>>>> kai
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import javafx.embed.swing.SwingNode;

import javafx.scene.layout.Pane;
import model.visualiser.dataholding.Event;
import model.visualiser.dataholding.Task;
<<<<<<< HEAD
//import jung.SimpleGraphView;


public class TaskFlowVisualiser implements Visualiser {

    @Override
    public void getVisualisation(Pane parent, HashMap<Integer, Task> taskMap, List<Event> eventList) {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }
    
    
}
/*
        @Override
	public void getVisualisation(Pane parent, HashMap<Integer, Task> taskMap, List<Event> eventList) {
             throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
            SimpleGraphView sgv = new SimpleGraphView();
            Graph<MyLink,SparseVertex> g;
=======
//import edu.uci.ics.jung.visualization.decorators.ToStringLabeller;
import edu.uci.ics.jung.visualization.transform.MutableTransformer;
import edu.uci.ics.jung.visualization.transform.Transformer;
import java.awt.event.MouseEvent;
import java.awt.geom.Point2D;
import model.visualiser.dataholding.Datakeeper;
//import jung.SimpleGraphView;

public class TaskFlowVisualiser implements Visualiser {

	@Override
	public void getVisualisation(Pane parent, Datakeeper datakeeper) {
            /*
            HashMap<Long,Task> taskMap = datakeeper.getTaskMap();
            Graph g;
>>>>>>> kai
            g = new DirectedSparseGraph();
            
            HashMap<Long,Vertex> vertexMap = new HashMap();
            Vertex zero = new SparseVertex();
            vertexMap.put(0L, zero);
            g.addVertex(zero);
            Iterator taskIterator = taskMap.entrySet().iterator();
            while(taskIterator.hasNext()) {
                Map.Entry pair = (Map.Entry) taskIterator.next();
                Task task = (Task)pair.getValue();
                Vertex v = new SparseVertex();
                g.addVertex(v);
                vertexMap.put(task.getId(), v);
                //Edge e = Edge(new MyLink((int) task.getId(),task.getParent()),v, v);
                //DirectedEdge e = (DirectedEdge) g.addEdge(new DirectedSparseEdge(v, v));
            }
            Iterator taskIterator2 = taskMap.entrySet().iterator();
            while(taskIterator2.hasNext()) {
                Map.Entry pair2 = (Map.Entry) taskIterator2.next();
                Task task2 = (Task)pair2.getValue(); 
                Vertex ver = vertexMap.get(task2.getId());
                Vertex parVer = vertexMap.get((long)task2.getParent());
                
                if(parVer != null) {
                    DirectedEdge e = (DirectedEdge) g.addEdge(new DirectedSparseEdge(ver, parVer));
                }
            }
            
            Layout l = new FRLayout( g );
            Renderer r = new PluggableRenderer();
            VisualizationViewer vv = new VisualizationViewer( l, r );
            
            vv.addGraphMouseListener(new GraphMouseListener() {
                @Override
                public void graphClicked(Vertex vertex, MouseEvent me) {
                    //throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
                }

                @Override
                public void graphPressed(Vertex vertex, MouseEvent me) {
                    System.out.println("pressed");
                    System.out.println(vertex.hashCode());
                    //Iterator iterator = vertex.getUserDatumKeyIterator();
                    //vertex.getUserDatum(iterator.next());
                }

                @Override
                public void graphReleased(Vertex vertex, MouseEvent me) {
                    //throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
                }
                
            });
            //vv.vertexToolTipTransformer();
            //VertexLabelAsShapeRenderer.
            //vv.getRenderContext().setVertexLabelTransformer(new ToStringLabeller());
            //Transformer transformer = new Transformer() {
            //    public String transform(String arg0) { return arg0; }

            //    @Override
            //    public Point2D transform(Point2D pd) {
            //        return pd;
            //    }

            //    @Override
            //    public Point2D inverseTransform(Point2D pd) {
            //        return pd;
            //    }
            //};
            //vv.setViewTransformer((MutableTransformer) transformer);
            SwingNode node = new SwingNode();   
            node.setContent( vv );
            	
            parent.getChildren().add(node);
<<<<<<< HEAD
    
}   */

=======
                */
        }      

    @Override
    public void run() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }
    
    @Override
    public String toString() {
        return "TaskFlow";
    }
>>>>>>> kai
           


